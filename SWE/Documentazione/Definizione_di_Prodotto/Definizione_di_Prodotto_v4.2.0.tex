
%includo il file che contiene la versione dei documenti
\input{../Logo&Header/versioneDocumenti.tex}

\newcommand{\Versione}{\versioneDefinizioneDiProdotto{}} %Versione Finale
\newcommand{\Data}{2014-04-04}				           	 %Data di creazione
\newcommand{\DataUltimaModifica}{2014-03-24}
\newcommand{\TipoDocumento}{Definizione di Prodotto}	 %tipo documento

%includo il file header.tex (logo grande in prima pagina piu qualche altra regola)
\input{../Logo&Header/header.tex}
%\vspace{.05in}

%informazioni documento
\begin{center}
%\section{Informazioni documento}
\begin{tabular}{r|l}
%\textbf{Nome} &\TipoDocumento \\
\textbf{Versione} & \Versione{} \\
\textbf{Data creazione} & \Data{} \\
\textbf{Data ultima modifica} & \DataUltimaModifica{} \\
\textbf{Stato del Documento} & Formale \\		          %CAMBIARE QUI
\textbf{Uso del Documento} & Esterno \\			          %CAMBIARE QUI
\textbf{Redazione} &  Pinato Giacomo, Mattia Sorgato\\	  %CAMBIARE QUI
& Michele Maso, Fabio Miotto\\
& Alessandro Benetti, Andrea Perin\\
\textbf{Verifica} & Alberto Garbui, Alessandro Benetti\\  %ED ANCHE QUI!
\textbf{Approvazione} & Michele Maso\\				      %CAMBIARE QUI
\textbf{Distribuzione} & \parbox[t]{4cm}{\NomeGruppo{}\\Prof. Vardanega Tullio\\Prof. Cardin Riccardo\\ \Prop{} }\\
\end{tabular}
\end{center}

\vspace{0.05in}

%inizio sommario del documento
\begin{abstract}
\begin{center}
Architettura di dettaglio dell'applicazione \Progetto{}.
\end{center}
\end{abstract}

%\vspace{.4in}

%seconda pagina, diario delle modifiche
\newpage
Diario delle modifiche
\begin{center}
\begin{longtable}{|c|c|c|p{0.5\linewidth}|}
\toprule
\textbf{Versione} & \textbf{Data} & \textbf{Autore} & \textbf{Modifiche effettuate}\\

%aggiungere qui una midrule per aggiungere una nuova riga alla tabella
\midrule
4.2.0 & 2014-05-24 & Michele Maso (RE) & Approvazione documento.\\
\midrule
4.1.1 & 2014-05-22 & Alessandro Benetti (VR) & Verifica documento.\\
\midrule
4.1.0 & 2014-05-20 & Alberto Garbui (VR) & Verifica documento.\\
\midrule
4.0.3 & 2014-XX-XX & Mattia Sorgato (PR) & Stesura controller del Server\\
\midrule
4.0.2 & 2014-XX-XX & Giacomo Pinato (PR) & Stesura dei controller\\
\midrule
4.0.2 & 2014-XX-XX & Mattia Sorgato (PR) & Stesura dei servizi e dei controller del Client\\
\midrule
4.0.1 & 2014-04-04 & Alberto Garbui (PR) & Prima stesura del documento.\\

\bottomrule
\caption{Registro delle modifiche}
\label{tab:changelog}

\end{longtable}
\end{center}

%terza pagina Indice (viene aggiornato in automatico con due compilazioni)
\newpage
\tableofcontents

%pagine successive hanno la lista di tabelle e lista delle figure
%(vengono aggiornate in automatico)
\newpage
%\listoftables	%tabelle
\listoffigures %elenco delle immagini

%qui inizia la prima pagina ufficiale
\newpage
\section{Introduzione}
\subsection{Scopo del documento}
Il seguente documento ha lo scopo di definire nel dettaglio la struttura del sistema \gloss{MaaP}, approfondendo quanto già riportato 
nella Specifica Tecnica. Tale documento fornisce una struttura dettagliata e completa che viene utilizzata dai \emph{Programmatori} per le 
attività di codifica.

\subsection{Scopo del prodotto}
\Prodotto{}

\subsection{Glossario}
\Glossario{}

\subsection{Riferimenti}

\subsubsection{Normativi}
\begin{itemize}
\item \grassetto{Analisi dei requisiti}: \emph{Analisi\_{}dei\_{}Requisiti\_{}v\versioneAnalisiDeiRequisiti{}.pdf};
\item \grassetto{Norme di Progetto}: \emph{Norme\_{}di\_{}Progetto\_{}v\versioneNormeDiProgetto{}.pdf};
\item \grassetto{Specifica Tecnica}: \emph{Specifica\_{}Tecnica\_{}v\versioneNormeDiProgetto{}.pdf};
\end{itemize}

\subsubsection{Informativi}
\begin{itemize}
\item \grassetto{AngularJS API}: \url{https://docs.angularjs.org/api};
\end{itemize}

\newpage
\section{Standard di progetto}
\subsection{Standard di progettazione architetturale}
Gli standard di progettazione architetturale sono definiti nella \emph{Specifica\_{}Tecnica\_{}v\versioneSpecificaTecnica{}.pdf}.

\subsection{Standard di documentazione del codice}
Gli standard di documentazione del codice sono specificati nel documento di 
\emph{Norme\_{}di\_{}Progetto\_{}v\versioneNormeDiProgetto{}.pdf}, nella sezione XXXXXX.	%Cambia qui, altrimenti, bad juju at you.

\subsection{Standard di denominazione di entità e relazioni}

\subsection{Standard di programmazione}
Gli standard di programmazione sono specificati nel documento di 
\emph{Norme\_{}di\_{}Progetto\_{}v\versioneNormeDiProgetto{}.pdf}, nella sezione XXXXXX.	%Cambia anche qui, con la sezione giusta.
\subsubsection{Tipi in JavaScript}
Essendo JavaScript un linguaggio non tipato, una variabile può assumere diversi tipi durante l'esecuzione
di un codice. Infatti è possibile cambiare il tipo di un riferimento semplicemente assegnando un valore diverso ad
una data variabile. \'{E} quindi ambiguo definire all'interno di un frammento di codice il tipo statico che una variabile
possiede. Lo stesso vale per i valori ritornati da una funzione JavaScript, i quali possono essere addirittura funzioni.



%Prefaction: ricordarsi di mettere negli Standard di Programmzione che, per Angular, le variabili nelle
%QueryString sono precedute da i ":".




\subsection{Strumenti di lavoro}
Gli strumenti di lavoro sono trattati nella sezione XXXXX del documento di					%idem con patate.
Gli standard di documentazione del codice e le norme da applicare nelle attività 
di Codifica sono specificati nel documento di 
\emph{Norme\_{}di\_{}Progetto\_{}v\versioneNormeDiProgetto{}.pdf}.


\newpage

\section{Namespace MaaP}
%qui ci va la figura della vista generale dei package
Namespace generale del progetto. In accordo con il design pattern architetturale Client-Server che 
abbiamo adottato, le interazioni che il Client ha con il Server sono di tipo REST-like.

\section{Specifica componenti Maap::Server}

Package Server del Design Pattern Client-Server. 

\subsection{::Controller}
Package che gestisce il dialogo con il Client di Maap. 
\subsubsection{@dispatcher}

\begin{description}
 \item[Descrizione] \hfill \\
Modulo di inizializzazione della componente Server utilizzata per la trasmissione dei dati al Client. \\
Il modulo \textit{dispatcher} gestisce tutte le richieste effettuate dal Client al Server, effettuando le dovute redirezioni e le chiamate per ottenere i dati dai database nel Server. Le richieste che pervengono al 
\textit{dispatcher} sono di tipo REST, a cui il modulo stesso risponde con il JSON della risorsa richiesta. 
Questo avviene solamente se l'utente che ha richiesto la risorsa è registrato ed autenticato, prima di 
effettuare la richiesta, e che abbia i dovuti permessi per effettuare la richiesta. Infatti, prima di eseguire ogni richiesta di accesso ai dati del Server, il \textit{dispatcher} esegue una chiamata al modulo \textit{passport} per verificare l'autenticazione del richiedente e per distinguere gli utenti standard dagli utenti amministratori. \\
Per ultima cosa, il \textit{dispatcher} gestisce eventuali richieste di risorse inesistenti o errate reindirizzando il chiamante alla pagina iniziale del Client AngularJS.
 \item[Dipendendenze entranti] \hfill \\
 \begin{itemize}
 \item @passport;
 \item path;
 \item @DatabaseAnalysisManager;
 \item @DatabaseUserManager;
 \item @IndexManager.
 \end{itemize}
 
 %\item[Dipendenze uscenti] \hfill \\	questo tipo di item lo commento perché è parecchio macchinoso
 %										e soprattutto LUNGO da fare.
 
 %\item[Attributi] \hfill \\
 
 \item[Metodi] \hfill \\
 \begin{description}
 \item[Gestione Collection e Document] \hfill \\
 \begin{description}
  \item[get('/api/collection/list', passport.checkAuthenticated, \\datamanager.sendCollectionsList);]\hfill \\
  Intercetta la richiesta di generare l'elenco delle Collection per visualizzarlo, verificando che essa sia autenticata e richiama il metodo sendCollectionsList del \textit{@datamanager}.
  \item[get('/api/collection/:col\_id', passport.checkAuthenticated, \\datamanager.sendCollection);]\hfill \\   Intercetta la richiesta di generare l'elenco dei Document all'interno di una Collection specificata con :col\_id. Verifica che essa sia autenticata e richiama il metodo sendDocument del \textit{@datamanager}.
  \item[get('/api/collection/:col\_id/:doc\_id', passport.checkAuthenticated,\\datamanager.sendDocument);]\hfill \\
  Intercetta la richiesta di generare i dati di un Document specificato con :doc\_id all'interno della Collection specificata con :col\_id per visualizzarli. Verifica che essa sia autenticata e richiama il metodo sendDocument del \textit{@datamanager}.
  \item[get('/api/collection/:col\_id/:doc\_id/edit', passport.checkAuthenticatedAdmin, \\datamanager.sendDocumentEdit);]\hfill \\
   Intercetta la richiesta di generare i dati di un Document specificato con :doc\_id all'interno della Collection specificata con :col\_id per modificarli. Verifica che essa sia autenticata e richiama il metodo sendDocumentEdit del \textit{@datamanager}.
  \item[put('/api/collection/:col\_id/:doc\_id/edit', passport.checkAuthenticatedAdmin, \\datamanager.updateDocument);]\hfill \\
  Intercetta la richiesta di modificare i dati di un Document specificato con :doc\_id all'interno della Collection specificata con :col\_id. Verifica che essa sia autenticata come amministratore e richiama il metodo updateDocument del \textit{@datamanager}.
  \item[delete('/api/collection/:col\_id/:doc\_id/edit', passport.checkAuthenticatedAdmin, \\datamanager.removeDocument);]\hfill \\
  Intercetta la richiesta di cancellare un Document specificato con :doc\_id all'interno della Collection specificata con :col\_id. Verifica che essa sia autenticata come amministratore e richiama il metodo removeDocument del \textit{@datamanager}.
 \end{description}
 \item[Gestione Profilo Utente] \hfill \\
 \begin{description}
   \item[dispatcher.get('/api/profile', passport.checkAuthenticated, \\usermanager.sendUserProfile);]\hfill \\
    Intercetta la richiesta di generare i dati del profilo utente per visualizzarli, verificando che essa sia autenticata e richiama il metodo sendUserProfile del \textit{@usermanager}.
   \item[dispatcher.get('/api/profile/edit', passport.checkAuthenticated, \\usermanager.sendUserProfileEdit);]\hfill \\
   Intercetta la richiesta di generare i dati del profilo utente per modificarli, verificando che essa sia autenticata e richiama il metodo sendUserProfileEdit del \textit{@usermanager}.
   \item[dispatcher.put('/api/profile/edit', passport.checkAuthenticated, \\usermanager.updateUserProfile);]\hfill \\
   Intercetta la richiesta di modificare i dati del profilo utente, verificando che essa sia autenticata e richiama il metodo updateUserProfile del \textit{@usermanager}.
 \end{description}  
 \item[Gestione Utenti] \hfill \\
  \begin{description}
    \item[dispatcher.get('/api/users/list', passport.checkAuthenticatedAdmin,\\usermanager.getUsersList);]\hfill \\
	 Intercetta la richiesta di generare l'elenco degli Utenti per visualizzarlo, verificando che essa sia autenticata come ammistratore e richiama il metodo getUsersListionsList del \textit{@usermanager}.
	\item[dispatcher.get('/api/users/:user\_id', passport.checkAuthenticatedAdmin,\\usermanager.sendUser);]\hfill \\
	Intercetta la richiesta di generare i dati di un Utente specificato con :user\_id per visualizzarli. Verifica che essa sia autenticata come amministratore e richiama il metodo sendUser del \textit{@usermanager}.
    \item[dispatcher.get('/api/users/:user\_id/edit', passport.checkAuthenticatedAdmin, \\usermanager.sendUserEdit);]\hfill \\
    Intercetta la richiesta di generare i dati di un Utente specificato per con :user\_id per modificarli. Verifica che essa sia autenticata come amministratore e richiama il metodo sendUserEdit del \textit{@usermanager}.
    \item[dispatcher.put('/api/users/:user\_id/edit', passport.checkAuthenticatedAdmin,\\usermanager.updateUser);]\hfill \\
    Intercetta la richiesta di modificare i dati di un Utente specificato per con :user\_id. Verifica che essa sia autenticata come amministratore e richiama il metodo updateUser del \textit{@usermanager}.
    \item[dispatcher.delete('/api/users/:user\_id/edit', passport.checkAuthenticatedAdmin,\\usermanager.removeUser);]\hfill \\
    Intercetta la richiesta di eliminare un Utente specificato per con :user\_id. Verifica che essa sia autenticata come amministratore e richiama il metodo removeUser del \textit{@usermanager}.
  \end{description}    
 \item[Gestione Query più utilizzate] \hfill \\
 \begin{description}
    \item[dispatcher.get('/api/queries/list', passport.checkAuthenticatedAdmin,\\datamanager.getTopQueries);]\hfill \\
    Intercetta la richiesta di generare l'elenco delle query più utilizzate. Verifica che essa sia autenticata come amministratore e richiama il metodo getTopQueries del \textit{@datamanager}.
    \item[dispatcher.delete('/api/queries/list', passport.checkAuthenticatedAdmin,\\datamanager.resetQueries);]\hfill \\
    Intercetta la richiesta di eliminare tutte le query più utilizzate. Verifica che essa sia autenticata come amministratore e richiama il metodo resetQueries del \textit{@datamanager}.
 \end{description}  
 \item[Gestione Indici nel Database di analisi] \hfill \\
  \begin{description}
    \item[dispatcher.get('/api/indexes', passport.checkAuthenticatedAdmin,\\datamanager.getIndexesList);]\hfill \\
    Intercetta la richiesta di generare l'elenco degli indici esistenti sul database di analisi. Verifica che essa sia autenticata come amministratore e richiama il metodo getIndexesList del \textit{@datamanager}.
    \item[dispatcher.put('/api/indexes', passport.checkAuthenticatedAdmin,\\datamanager.createIndex);]\hfill \\
    Intercetta la richiesta di inserire un indice nel database di analisi. Verifica che essa sia autenticata come amministratore e richiama il metodo createIndex del \textit{@datamanager}.
    \item[dispatcher.delete('/api/indexes/:index\_name', passport.checkAuthenticatedAdmin,\\datamanager.deleteIndex);]\hfill \\
     Intercetta la richiesta di cancellare un indice dal database di analisi. Verifica che essa sia autenticata come amministratore e richiama il metodo deleteIndex del \textit{@datamanager}.
 \end{description} 
 \item[Gestione Login] \hfill \\
 \begin{description}
 \item[post('/api/check/email', passport.checkNotAuthenticated, usermanager.checkMail);]
 Gestisce la richiesta di controllo della presenza di una particolare email già registrata al sistema. La condizione per richiedere questa informazione è che l'utente non sia autenticato, da qui la chiamata alla funzione \textit{passport.checkNotAuthenticated}. Nel caso la chiamata alla precedente funzione abbia successo, viene richiamato il metodo \textit{checkMail} di \textit{@DatabaseAnalysisManager}.
 \item[post('/api/signup', passport.checkNotAuthenticated, usermanager.userSignup);]
 Gestisce la richiesta di registrazione da parte di un utente non autenticato. Se l'utente associato alla richiesta non è autenticato, viene richiamato il metodo \textit{userSignup} di \textit{@DatabaseAnalysisManager}.
 \item[get('/loggedin', function(req, res) {	res.send(req.isAuthenticated() ? req.user : '0'); });]
 Gestisce la richiesta di controllo dell'avvenuta autenticazione di un utente. Viene richiamato sul richiedente il metodo locale \textit{isAuthenticated()}. Se l'utente è autenticato, gli vengono inviate le proprie informazioni associate, altrimenti viene ritornato 0.
 \item[post('/api/login', passport.checkNotAuthenticated, passport.authenticate, function(req, res) { res.send(req.user); });]
 Gestisce le richieste di autenticazione al Server. L'utente che richiede questa operazione non deve essere autenticato ma deve essere presente nel database degli utenti presente nel Server. Nel caso di risposta affermativa ad entrambe le precedenti condizioni, viene creata una nuova sessione per l'utente richiedente.
 \item[get('/api/logout', passport.checkAuthenticated, function(req, res) { req.logout(); res.send(200); });]
 Gestisce le richieste di disconnessione dal sistema. Per effettuare questa operazione, l'utente deve essere autenticato. In caso affermativo, viene richiesto il \textit{logout()} del richiedente.
 \end{description}


\item[Gestione richieste illecite] \hfill \\
 \begin{description}
 \item[get('*', function(req, res) {	res.sendfile(path.join(config.static\_assets.dir, 'index.html')); });]
 La presente funzione gestisce ogni richiesta di pagina o file che il Server non possiede. L'argomento "*" della funzione \textit{get} consente di gestire tutte le richieste che non sono state servite dalle precedenti funzioni del \textit{@dispatcher}. Questa funzione viene richiamata soltanto quando non le funzioni precedenti non sono state chiamate.
 \end{description}

\item[Inizializzazione] \hfill \\
 \begin{description}
  \item[dispatcherInit():] \hfill \\ 
  accetta app (l'applicazione di \textit{Express}) come parametro, si occupa dell'inizializzazione del \textit{dispatcher}. Viene esportato come init();
 \end{description}
\end{description}

\subsubsection{@frontController}
\begin{description}
 \item[Descrizione] \hfill \\
 Il frontController è l'interfaccia di connessione tra il Server ed il Client. Si occupa dell' inizializzazione del dispatcher reindirizzando ad esso le richieste del Client.
 \item[Dipendendenze entranti] \hfill \\
 \begin{itemize}
 \item @dispatcher.
 \end{itemize}
 \item[Metodi] \hfill \\
  \begin{description}
    \item[initFrontController()]\hfill \\
  	\'{E} la funzione di inizializzazione del frontController ed indica di reindirizzare le richieste del Client al \textit{@dispatcher} per gestirle. Accetta  app (l'applicazione di Express) come parametro. Viene esportato come init().
  \end{description}
\end{description}

\subsubsection{@index}
\begin{description}
 \item[Descrizione] \hfill \\
  Controller che si occupa dell' inizializzazione del frontController.
 \item[Dipendendenze entranti] \hfill \\
 \begin{itemize}
 \item @frontController.
 \end{itemize}
 \item[Metodi] \hfill \\
  \begin{description}
    \item[init()]\hfill \\
  	\'{E} la funzione di inizializzazione dell'index, si occupa di inizializzare il \textit{@frontController}. Accetta  app (l'applicazione di Express) come parametro.
  \end{description}
\end{description}

\subsubsection{@passport}
 \item[Descrizione] \hfill \\
Controller che si occupa dell' inizializzazione e gestione del modulo passort per le autenticazioni.
\item[Dipendendenze entranti] \hfill \\
  \begin{itemize}
   \item passport;
   \item passport-local.Strategy;
   \item @MongooseDBFramework.
  \end{itemize}
   \item[Metodi] \hfill \\
    \begin{description}
     \item[authenticate()] \hfill \\
     Imposta il metodo di autenticazione, nel nostro caso come local.
     \item[initPassport()] \hfill \\
     Inizializza il controller passport, inizializzando e avviando la sessione del modulo passport e definisce le strategie di autenticazione; Accetta app (l'applicazione di Express) come parametro.
     \item[checkAuthenticatedAdmin()] \hfill \\
     Verifica che la richiesta proveniente dal client sia autenticata e che il livello dell'utente sia 1. Accetta req (la richiesta del Client), res (la risposta al Client) e next (cosa invocare nel caso di successo) come parametri.
     \item[checkAuthenticated()] \hfill \\
     Verifica che la richiesta proveniente dal client sia autenticata. Accetta req (la richiesta del Client), res (la risposta al Client) e next (cosa invocare nel caso di successo) come parametri.
     \item[checkNotAuthenticated()] \hfill \\
     Verifica che la richiesta proveniente dal client non sia autenticata Accetta req (la richiesta del Client), res (la risposta al Client) e next (cosa invocare nel caso di successo) come parametri.
     \end{description}
\subsection{::ModelServer}
Package che racchiude i database, le loro operazioni di accesso e i file 
DSL con i relativi interpreti.

\subsubsection{::Database}
\paragraph{@index}
\begin{description}
 \item[Descrizione] \hfill \\
 Si occupa dell'inizializzazione dei database degli utenti e di analisi. Crea l'amministratore di default di Maap.
 \item[Dipendendenze entranti] \hfill \\
   \begin{itemize}
   \item mongoose;
   \item @MongooseDBAnalysis;
   \item @MongooseDBFramework;
   \item @DataRetrieverUsers.
   \end{itemize}
 \item[Metodi] \hfill \\
 \begin{description}
 \item[initDB()] \hfill \\
 Si occupa dell'inizializzazione dei database. Effettua la connessione al database utenti e a quello di analisi.Inizializza lo userDBManager, invoca addAdminDefault e inizializza il \textit{@dataDBManager}. Accetta app (l'applicazione di Express) come parametro. Viene esportata come init().
  \item[addAdminDefault()] \hfill \\
  Si occupa dell'aggiunta dell'amministratore di default nel database degli utenti. Accetta config (i parametri di configurazione del progetto) e userDB (la connessione a database degli utenti)come parametri.
 \end{description}
\end{description}

\paragraph{@MongooseDBAnalysis}
\begin{description}
 \item[Descrizione] \hfill \\
 Si occupa dell'inizializzazione dei modelli di Mongoose.
 \item[Dipendendenze entranti] \hfill \\
    \begin{itemize}
    \item fs;
    \item path;
    \item mongoose.
    \end{itemize}
\item[Metodi] \hfill \\
 \begin{description}
 \item[init()] \hfill \\
 Legge la cartella contenente le collectionData dei DSL e per ogni file inizializza il modello di mongoose come elemento dell'array modelArray che poi esposta come model. Accetta app (l'applicazione di Express) come parametro.
 \end{description}
\end{description}

\paragraph{@MongooseDBFramework}
\begin{description}
 \item[Descrizione] \hfill \\
 Si occupa dell'inizializzazione dei modelli di Mongoose.
  \item[Dipendendenze entranti] \hfill \\
  \begin{itemize}
  \item mongoose.
  \end{itemize}
\item[Funzionalità esportate] \hfill \\
 \begin{description}
 \item[init()] \hfill \\
 Si occupa di creare gli schemi di Mongoose per la collection utenti e la collection query, esporta tali modelli come users e query e la connessione al database come connection. Accetta app (l'applicazione di Express) come parametro.
 \end{description}
\end{description}

\subsubsection{::DataManager}
Package che gestisce gli accessi ai database.

\paragraph{::DatabaseAnalysisManager}
Package che gestisce le query ai database di analisi. 

\subparagraph{@DatabaseAnalysisManager}

\begin{description}
 \item[Descrizione] \hfill \\

 \item[Dipendendenze entranti] \hfill \\
 
 \item[Dipendenze uscenti] \hfill \\
 
 \begin{itemize}
 \item{path}
 \item{DataRetrieverAnalysis}
 \item{IndexManager}
 \item{JSonComposer}
 \end{itemize}
 
 \item[Attributi] \hfill \\
 
 \item[Metodi] \hfill \\
 \begin{itemize}
 \item{sendCollectionList:} invia al al client la lista delle varie Collection definite dai DSL; 
 \item{sendCollection}
 \item{sendDocument}
 \item{sendDocumentEdit}
 \item{updateDocument}
 \item{removeDocument}
 \end{itemize}
 
\end{description}


\subparagraph{@DataRetrieverAnalysis}

\paragraph{::DatabaseUserManager}
\subparagraph{@DatabaseUserManager}
\subparagraph{@DataRetrieverUsers}

\paragraph{::IndexManager}
\subparagraph{@IndexManager}

\paragraph{@JsonComposer}

\subsubsection{::DSL}
\subparagraph{@DSLManager}
\subparagraph{@DSLParser}
\subparagraph{@index}
\subparagraph{@JavascriptParser}
\subparagraph{@schemaGenerator}

\section{Specifica componenti Maap::Client}

\subsection{::View}

\subsubsection{::Template}
I template utilizzati da AngularJs per la generazione delle pagine sono i seguenti:

\begin{center}
\begin{longtable}{|c|c|c|p{0.5\linewidth}|}
\toprule
\textbf{Template} & \textbf{Pagina} \\

%aggiungere qui una midrule per aggiungere una nuova riga alla tabella
\midrule
collection.html & Pagina contenente i documenti di una determinata collection\\
\midrule
dashboard.html & Pagina principale visualizzata dopo il login\\
 \midrule
document.html & Pagina per la visualizzazione di un singolo document\\
 \midrule
documentEdit.html &  Pagina per la modifica di un singolo document\\
 \midrule
indexCollection & Pagina per la visualizzazione degli indici creati (admin)\\
 \midrule
login.html & Pagina per il login\\
\midrule
navbar.html & Barra di navigazione superiore, inclusa nella maggior parte delle pagine\\
 \midrule
queryCollection.html & Pagina per la visualizzazione delle query pi\'{u} utilizzate (admin)\\
 \midrule
register.html & Pagina per la registrazione\\
 \midrule
userCollection.html & Pagina per la visualizzazione della collection degli utenti maap (admin)\\
 \midrule
userEdit.html & Pagina per la modifica del profilo dell'utente (user) / di un utente (admin)\\
 \midrule
userProfile & Pagina per la visualizzazione del profilo utente (user) / di un utente (admin)\\
 
\end{longtable}
\end{center}


\subsection{::ControllerModelView}

\subsubsection{::ControllerClient}

\paragraph{@CollectionController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della Collection view.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati della Collection view.
 Fornisce l'inizializzazione di base della pagina ed esegue la mediazione tra la Collection view
 e le richieste di visualizzazione e modifica dei dati di una Collection.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$location;
  \item \$routeParams;
  \item DocumentEditService;
  \item CollectionDataService;
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item \$scope.current\textunderscore sorted \textunderscore column;
 \item \$scope.column \textunderscore original \textunderscore name;
 \item \$scope.current \textunderscore sort;
 \item \$scope.current \textunderscore page;
 \item \$scope.current\textunderscore collection;
 \item \$scope.rows;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[init()] \hfill \\
  Funzione di inizializzazione del CollectionController. Imposta i valori iniziali delle variabili dello
  \$scope associate alla Collection view ed esegue la funzione \emph{getData()}.
  
  \item[getData()] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita dal CollectionDataService.
  Con questa funzione vengono prelevati i dati legati alla Collection da visualizzare e vengono
  passati alla Collection view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  
  \item[\$scope.numerify(num)] \hfill \\
  Funzione ausiliaria che crea un array di dimensione   {num} che verrà poi usato dalla directive   {ng-repeat} di angular per la creazione 
  del numero di 
  pagine disponibili.
  
  \item[\$scope.previousPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio dalla pagina di visualizzazione corrente alla precedente.
  Diminuisce di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina precedente con \emph{getData()}.
  
  \item[\$scope.nextPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio dalla pagina di visualizzazione corrente alla successiva.
  Aumenta di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina successiva con \emph{getData()}.
  
  \item[\$scope.toPage(index)] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione specificata dal parametro \emph{index}.
  Aggiorna l'indicatore della pagina corrente settandolo all'indice passato per parametro alla funzione.
  Successivamente esegue una richiesta al server per ottenere i dati per la nuova visualizzazione.
  
  \item[changeSort()] \hfill \\
  Cambia la variabile \$current\_sort dello \$scope che regola l'ordine di visualizzazione dei Document, da discendente ad
  ascendente e viceversa.
  
  \item[\$scope.columnSort(index)] \hfill \\
  Funzione che cambia l'ordinamento di visualizzazione di una colonna della Collection view. \\
  Se la colonna in questione è una colonna diversa da quella che precedentemente ordinata,
  la variabile \emph{current\_sorted\_column} dello \$scope viene aggiornata, altrimenti la funzione cambia solamente
  l'ordinamento della colonna.
  
  \item[\$scope.deleteDocument(index)] \hfill \\
  Funzione che elimina il Document identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da DocumentEditService fornendo come argomenti l'identificativo della Collection correntemente visualizzata e l'indice
  del Document da eliminare. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
  
 \end{description}
\end{description}

\paragraph{@DashboardController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della Dashboard.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati della dashboard.
Fornisce un immediato elenco delle collection disponibili.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item CollectionListService;
  
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[CollectionListService.get] \hfill \\
  Funzione che richiede al server l'elenco delle collection disponibli e le inserisce nello scope.
  
 \end{description}
\end{description}

\paragraph{@DocumentController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di visualizzazione di un documento.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la visualizzazione di un document.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location
  \item DocumentDataService;
  \item DocumentEditService;
  \item \$routeParams.
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.current\textunderscore collection;
 \item  \$scope.current\textunderscore document;
 \item  \$scope.values;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[DocumentDataService.query] \hfill \\
  Funzione che richiede al server il documento identificato da current\textunderscore collection e current\textunderscore document.
  L'oggetto ritornato dal server viene poi ricopiato in array per mantenere l'ordinamento e semplificare la gestione.
  \item[delete\textunderscore document()] \hfill \\
  Funzione che cancella dal server il documento attualmente visualizzato.
 \end{description}
\end{description}

\paragraph{@DocumentEditController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di modifica di un documento.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la modifica di un document.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location
  \item DocumentEditService;
  \item \$routeParams.
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.current\textunderscore collection;
    \item  \$scope.current\textunderscore document;
    \item  \$scope.original\textunderscore data;
    \item  \$scope.original\textunderscore keys;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[DocumentEditService.query] \hfill \\
  Funzione che richiede al server il documento identificato da current\textunderscore collection e current\textunderscore document.
  L'oggetto ritornato dal server viene poi ricopiato in array per mantenere l'ordinamento e semplificare la gestione.
  \item[edit\textunderscore document()] \hfill \\
  Funzione che invia al server il documento modificato nel client.
  Assembla un JSON a partire da original\textunderscore keys e original\textunderscore data. Quest'ultima variabile nel frattempo è stata 
  modificata con i nuovi valori del documento.
  \item[delete\textunderscore document()] \hfill \\
  Funzione che cancella dal server il documento attualmente visualizzato.
 \end{description}
\end{description}

\paragraph{@IndexController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di gestione degli indici.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati degli indici.

 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$location;
  \item IndexService;
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item \$scope.rows;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[init()] \hfill \\
  Funzione di inizializzazione del CollectionController. Imposta i valori iniziali delle variabili dello
  \$scope associate alla Collection view ed esegue la funzione \emph{getData()}.
  
  \item[getData()] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da IndexService.
  Con questa funzione vengono prelevati i dati legati agli indici da visualizzare e vengono
  passati alla  view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  
  \item[\$scope.numerify(num)] \hfill \\
   Funzione ausiliaria che crea un array di dimensione   {num} che verrà poi usato dalla directive ng-repeat di angular per la creazione del 
   numero di pagine  disponibili.
  
  \item[\$scope.previousPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione precedente alla corrente.
  Diminuisce di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina precedente con \emph{getData()}.
  
  \item[\$scope.nextPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione successiva alla corrente.
  Aumenta di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina successiva con \emph{getData()}.
  
  \item[\$scope.toPage(index)] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione specificata dal parametro \emph{index}.
  Aggiorna l'indicatore della pagina corrente settandolo all'indice passato per parametro alla funzione.
  Successivamente esegue una richiesta al server per ottenere i dati per la nuova visualizzazione.
  
  \item[changeSort()] \hfill \\
  Cambia la variabile \$current\_sort dello \$scope che regola l'ordine di visualizzazione dei Document, da discendente ad
  ascendente e viceversa.
  
  \item[\$scope.columnSort(index)] \hfill \\
  Funzione che cambia l'ordinamento di visualizzazione di una colonna della Collection view. \\
  Se la colonna in questione è una colonna diversa da quella che precedentemente ordinata,
  la variabile \emph{current\_sorted\_column} dello \$scope viene aggiornata, altrimenti la funzione cambia solamente
  l'ordinamento della colonna.
  
  \item[\$scope.deleteDocument(index)] \hfill \\
  Funzione che elimina l'indice identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da IndexService fornendo come argomenti l'indice passato come argomento. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
  
 \end{description}
\end{description}


\paragraph{@LoginController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di login.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante l'autenticazione.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$cookieStore;
  \item \$location;
  \item AuthService;
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.isAdmin;
 \item \$scope.signup\textunderscore enabled;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[ CollectionListService.get] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da CollectionListService.
  Con questa funzione viene prelevato l'elenco delle collection disponibili.
  Se l'utente ha inserito dati corretti, esso viene autenticato e reindirizzato alla dashboard, altrimenti viene mostrato un errore.
 
  
 \end{description}
\end{description}

\paragraph{@NavBarController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della barra di navigazione superiore.
 
 \item[Utilizzo] \hfill \\
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$cookieStore;
  \item \$location;
  \item LogoutService;
  \item CollectionListService.
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.credentials;

 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[login()] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da AuthService.
  Con questa funzione vengono prelevati i dati legati al form di login e trasmessi al server per l'autenticazione.
	Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404. 
  	\item[logout()] \hfill \\
  Richiama la richiesta RESTful \textit{logout} sulla \$resource fornita da LogoutService.
  Con questa funzione viene distrutta la sessione riguardante l'utente presente sul server e si viene poi disconnessi.
  che mostra l'errore 404. 
 \end{description}
\end{description}

\paragraph{@ProfileController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di gestione del profilo.
 
 \item[Utilizzo] \hfill \\
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location;
  \item ProfileDataService;
  \item ProfileEditService;
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item \$scope.original\textunderscore data;
 \item \$scope.original\textunderscore keys;

 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[ProfileDataService.query] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da ProfileDataService.
  Con questa funzione vengono prelevati i dati legati al profilo utente e caricati sullo scope.
	Se non vengono visualizzati risultati, ovvero se il profilo non esiste, avviene un redirect alla pagina
  che mostra l'errore 404. 
  	\item[delete\textunderscore document()] \hfill \\
  Richiama la richiesta RESTful \textit{remove} sulla \$resource fornita da ProfileEditService.
  Con questa funzione viene cancellato dal server il profilo dell'utente corrente.
 \end{description}
\end{description}

\paragraph{@ProfileEditController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di modifica di un documento.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la modifica di un document.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location
  \item ProfileEditService;
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.oldPassword;
 \item  \$scope.newPassword1;
 \item  \$scope.newPassowrd2;
 \item  \$scope.original\textunderscore data;
 \item \$scope.original\textunderscore keys;
 \item \$scope.valid.
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[ProfileEditService.query] \hfill \\
   Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da ProfileEditService.
  Con questa funzione vengono prelevati i dati legati al profilo utente e caricati sullo scope.
	Se non vengono visualizzati risultati, ovvero se il profilo non esiste, avviene un redirect alla pagina
  che mostra l'errore 404. 
  \item[edit\textunderscore document()] \hfill \\
  Funzione che invia al server il profilo modificato nel client.
  Assembla un JSON a partire da original\textunderscore keys e original\textunderscore data. Quest'ultima variabile nel frattempo è stata 
  modificata con i nuovi valori del documento.
  \item[delete\textunderscore document()] \hfill \\
  Funzione che cancella dal server il profilo attualmente visualizzato.
 \end{description}
\end{description}

\paragraph{@QueryController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di gestione delle query.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati della pagina di gestione delle query.
 
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$location;
  \item QueryService;
  \item IndexService;
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item \$scope.current\textunderscore sorted\textunderscore column;
 \item \$scope.column\textunderscore original\textunderscore name;
 \item \$scope.current\textunderscore sort;
 \item \$scope.current\textunderscore page;
 \item \$scope.current\textunderscore collection;
 \item \$scope.rows;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[init()] \hfill \\
  Funzione di inizializzazione del CollectionController. Imposta i valori iniziali delle variabili dello
  \$scope associate alla Collection view ed esegue la funzione \emph{getData()}.
  
  \item[getData()] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita dal QueryService.
  Con questa funzione vengono prelevati i dati legati alla Collection da visualizzare e vengono
  passati alla Collection view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  
    \item[\$scope.createIndex(id)] \hfill \\
  Funzione ausiliaria che crea un indice a partire da una delle query presenti nella collection delle query.
  
  \item[\$scope.numerify(num)] \hfill \\
  Funzione ausiliaria che crea un array di dimensione num che verrà poi usato dalla directive   ng-repeat di angular per la creazione del 
  numero di pagine  disponibili.
  
  \item[\$scope.previousPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione precedente alla corrente.
  Diminuisce di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina precedente con \emph{getData()}.
  
  \item[\$scope.nextPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione successiva alla corrente.
  Aumenta di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina successiva con \emph{getData()}.
  
  \item[\$scope.toPage(index)] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione specificata dal parametro \emph{index}.
  Aggiorna l'indicatore della pagina corrente settandolo all'indice passato per parametro alla funzione.
  Successivamente esegue una richiesta al server per ottenere i dati per la nuova visualizzazione.
  
  \item[changeSort()] \hfill \\
  Cambia la variabile \$current\_sort dello \$scope che regola l'ordine di visualizzazione dei Document, da discendente ad
  ascendente e viceversa.
  
  \item[\$scope.columnSort(index)] \hfill \\
  Funzione che cambia l'ordinamento di visualizzazione di una colonna della Collection view. \\
  Se la colonna in questione è una colonna diversa da quella che precedentemente ordinata,
  la variabile \emph{current\_sorted\_column} dello \$scope viene aggiornata, altrimenti la funzione cambia solamente
  l'ordinamento della colonna.
  
  \item[\$scope.deleteDocument(index)] \hfill \\
  Funzione che elimina il Document identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da DocumentEditService fornendo come argomenti l'identificativo della Collection correntemente visualizzata e l'indice
  del Document da eliminare. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
  
 \end{description}
\end{description}

\paragraph{@RegisterController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di registrazione.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la registrazione.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location;
  \item RegisterService;
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item  \$scope.credentials;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[ signupForm()] \hfill \\
  Nel caso in cui il form di registrazione sia compilato con dati validi, richiama la richiesta RESTful \textit{query} sulla \$resource 
  fornita da RegisterService.
  Con questa funzione viene creato un nuovo utente sul server in base ai dati inseriti.
 
  
 \end{description}
\end{description}


\paragraph{@UsersCollectionController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della Collection degli user.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati della Collection degli user.
 Fornisce l'inizializzazione di base della pagina ed esegue la mediazione tra la Collection view
 e le richieste di visualizzazione e modifica dei dati di una Collection.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$route;
  \item \$location;
  \item UserCollectionService;
  \item UserEditService;
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
 \item \$scope.current\textunderscore sorted\textunderscore column;
 \item \$scope.column\textunderscore original\textunderscore name;
 \item \$scope.current\textunderscore sort;
 \item \$scope.current\textunderscore page;
 \item \$scope.current\textunderscore collection;
 \item \$scope.rows;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[init()] \hfill \\
  Funzione di inizializzazione del CollectionController. Imposta i valori iniziali delle variabili dello
  \$scope associate alla Collection view ed esegue la funzione \emph{getData()}.
  
  \item[getData()] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da UserCollectionService.
  Con questa funzione vengono prelevati i dati legati alla Collection da visualizzare e vengono
  passati alla Collection view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  
  \item[\$scope.numerify(num)] \hfill \\
  Funzione ausiliaria che crea un array di dimensione   {num} che verrà poi usato dalla directive   {ng-repeat} di angular per la creazione 
  del numero di pagine  disponibili.
  
  \item[\$scope.previousPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione precedente alla corrente.
  Diminuisce di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina precedente con \emph{getData()}.
  
  \item[\$scope.nextPage()] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione successiva alla corrente.
  Aumenta di 1 l'indicatore della pagina corrente e esegue una nuova richiesta al server per i dati corrispondenti
  alla pagina successiva con \emph{getData()}.
  
  \item[\$scope.toPage(index)] \hfill \\
  Aggiunge allo \$scope la funzionalità di passaggio alla pagina di visualizzazione specificata dal parametro \emph{index}.
  Aggiorna l'indicatore della pagina corrente settandolo all'indice passato per parametro alla funzione.
  Successivamente esegue una richiesta al server per ottenere i dati per la nuova visualizzazione.
  
  \item[changeSort()] \hfill \\
  Cambia la variabile \$current\\textunderscore sort dello \$scope che regola l'ordine di visualizzazione dei Document, da discendente ad
  ascendente e viceversa.
  
  \item[\$scope.columnSort(index)] \hfill \\
  Funzione che cambia l'ordinamento di visualizzazione di una colonna della Collection view. \\
  Se la colonna in questione è una colonna diversa da quella che precedentemente ordinata,
  la variabile \emph{current\_sorted\_column} dello \$scope viene aggiornata, altrimenti la funzione cambia solamente
  l'ordinamento della colonna.
  
  \item[\$scope.deleteDocument(index)] \hfill \\
  Funzione che elimina il profilo identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da UserEditService fornendo come argomenti l'identificativo della Collection correntemente visualizzata e l'indice
  del Document da eliminare. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
  
 \end{description}
\end{description}

\paragraph{@UsersController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di visualizzazione di un profilo utente da parte di un amministratore.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la visualizzazione di un document.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location;
  \item \$routeParams;
  \item UserDataService;
  \item UserEditService.
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
  \item \$scope.current\textunderscore document;
  \item  \$scope.values;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[UserDataService.query] \hfill \\
  Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da UserDataService.
  Con questa funzione vengono prelevati i dati legati alla Collection da visualizzare e vengono
  passati alla Collection view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  
  \item[\$scope.deleteDocument(index)] \hfill \\
  Funzione che elimina il profilo identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da UserEditService fornendo come argomenti l'identificativo della Collection correntemente visualizzata e l'indice
  del Document da eliminare. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
 \end{description}
\end{description}

\paragraph{@UsersEditController}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che descrive il Controller della pagina di modifica di un documento.
 
 \item[Utilizzo] \hfill \\
 Controller utilizzato da AngularJS per fornire e gestire i dati durante la modifica di un document.
 
 \item[Dipendendenze iniettate al controller] \hfill \\
 \begin{itemize}
  \item \$scope;
  \item \$location
  \item UserEditService;
  \item \$routeParams.
  
 \end{itemize}
 
 \item[Attributi] \hfill \\
 \begin{itemize}
    \item  \$scope.current\textunderscore document;
    \item  \$scope.original\textunderscore data;
    \item  \$scope.original\textunderscore keys;
 \end{itemize}
 
 \item[Funzionalità esportate] \hfill \\
 \begin{description}
  \item[UserEditService.query] \hfill \\
 Richiama la richiesta RESTful \textit{query} sulla \$resource fornita da UserEditService.
  Con questa funzione vengono prelevati i dati legati alla Collection da visualizzare e vengono
  passati alla Collection view tramite il binding con lo \$scope. \\
  Se non vengono visualizzati risultati, ovvero se la Collection non esiste, avviene un redirect alla pagina
  che mostra l'errore 404.
  \item[edit\textunderscore document()] \hfill \\
  Funzione che invia al server il documento modificato nel client.
  Assembla un JSON a partire da original\textunderscore keys e original\textunderscore data. Quest'ultima variabile nel frattempo è stata 
  modificata con i nuovi valori del documento.
  \item[delete\textunderscore document()] \hfill \\
 Funzione che elimina il profilo identificato dall'indice \emph{index}. Effettua una richiesta REST di rimozione alla risorsa
  pubblicizzata da UserEditService fornendo come argomenti l'identificativo della Collection correntemente visualizzata e l'indice
  del Document da eliminare. \\
  Se l'eliminazione ha successo viene lanciato l'aggiornamento della vista corrente con il Document eliminato, altrimenti si
  richiama la callback di errore.
 \end{description}
\end{description}

\subsubsection{::Scope}

\subsubsection{::Directives}

\subsection{::ModelClient}

\subsubsection{::Model}
%il Model nel Client c'e' ancora? perche' a quanto pare non serve nemmeno.
No non esiste
\subsubsection{::Services}
\paragraph{@AuthService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che espone un oggetto \$resource legato all'autenticazaione utente.
 \item[Utilizzo] \hfill \\
 Viene utilizzato per astrarre il processo di verifica delle credenziali eseguito dal server. Questo modulo esegue una richiesta alle
 API del server per stabilire se le credenziali inserite dall'utente sono valide all'autenticazione. Il modulo ritorna una \$resource
 per rendere più semplice ed immediato il dialogo tra il Client e il sistema di autenticazione. \\
 La \$resource esportata da questo modulo viene utilizzata nel LoginCtrl per verificare le credenziali inserite lato Client.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 L'istruzione di ritorno crea una nuova \$resource che espone il metodo \textit{login} che verrà invocato dal LoginCtrl.
\end{description}

\paragraph{@CollectionDataService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che espone un oggetto \$resource legato ad una particolare Collection. 
 
 \item[Utilizzo] \hfill \\
 Viene utilizzato come astrazione della risorsa Collection, su cui il CollectionController invocherà delle richieste RESTful aggiungendo 
 i parametri necessari. La risorsa fornita conterr\'{a} i Document ad essa correlati e quest'ultimi verranno visualizzati in base alle 
 opzioni della richiesta RESTful.
 
 \item[Funzionalità esportate] \hfill \\
 %qui ci andrebbe tipo uno screenshot del codice, devo ancora capire come esporre le informazioni del sorgente
 \emph{Dipendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 L'istruzione di ritorno crea una nuova \$resource che modella il comportamento della Collection che verrà individuata tramite l'attributo 
 \emph{col\_id}.
\end{description}

\paragraph{@CollectionListService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che espone un oggetto \$resource legato alla lista delle Collection disponibili.
 
 \item[Utilizzo] \hfill \\
 Viene creata una \$resource che modella ad alto livello la lista delle Collection disponibili, per essere utilizzata nel DashboardController.
 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 L'istruzione di ritorno crea una \$resource che contiene la lista delle Collection disponibili, con 
 cui interagire tramite richieste RESTful.
 
\end{description}

\paragraph{@DocumentDataService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che espone un oggetto \$resource legato ad un particolare Document.
 
 \item[Utilizzo] \hfill \\
 Questo servizio ritorna un oggetto \$resource legato ad un particolare Document, che verrà  utilizzato dal DocumentController tramite 
 richieste RESTful per visualizzarne gli attributi.
 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 L'oggetto ritornato da questa Factory lega la \$resource ritornata al Document \emph{doc\_id} della Collection
 \emph{col\_id}. Inoltre, stabilisce che le richieste \emph{query} vengano effettuate tramite metodo GET. 
 
\end{description}

\paragraph{@DocumentEditservice}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che espone un oggetto \$resource legato ad un particolare Document modificabile.
 
 \item[Utilizzo] \hfill \\
 Questo servizio ritorna un oggetto \$resource legato ad un particolare Document, che verrà  utilizzato dal DocumentEditController tramite 
 richieste RESTful, sia per visualizzarne  le informazioni, sia per modificarne le proprietà.
 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 L'oggetto ritornato da questa Factory lega la \$resource ritornata al Document \emph{doc\_id} della Collection
 \emph{col\_id}. Inoltre, oltre alla visualizzazione, descrive che le richieste di \emph{update} vengono effettuate
 con richieste di \emph{PUT}, mentre le richieste di \emph{remove} useranno il metodo http \emph{DELETE}.
 
\end{description}

\paragraph{@IndexService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che pubblicizza una \$resource legata ad un indice.
 \item[Utilizzo] \hfill \\
 Questo servizio ritorna una \$resource legata ad un indice fornito dal server, per essere utilizzata dall'IndexCtrl per gestire i vari 
 indici visualizzati nel Client. Il presente modulo viene inoltre iniettato nel QueryCtrl per creare un nuovo indice a partire da una 
 query data. Questa risorsa esportata è dotata di tre metodi di accesso e modifica dei dati dell'indice, ovvero
 \textit{query}, \textit{insert} e \textit{remove}.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La \$resource esportata fornisce all'IndexCtrl del Client una modo diretto per interagire con un indice fornito dal server. Questa 
 risorsa dispone di un metodo \textit{query} per eseguire una GET RESTful per ottenere una lista degli indici presenti sul Server.
 Il metodo \textit{insert} crea un nuovo indice a partire da una delle query più utilizzate. \textit{remove} invece rimuove un indice
 dalla lista degli indici presenti sul server.
\end{description}

\paragraph{@LogoutService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che fornisce la \$resource legata al servizio di logout di un utente autenticato del Client.
 \item[Utilizzo] \hfill \\
  Questo servizio fornisce un'astrazione del metodo di logout eseguito dal server. La \$resource esportata dal servizio viene utilizzata
  nel NavBarCtrl per effettuare il logout di un autente autenticato, tramite il metodo pubblicizzato \textit{logout}. 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La risorsa ritornata dal modulo astrae la connessione con il server quando si effettua il logout dal sistema. La funzione \textit{logout} 
 associata alla \$resource ritornata esegue una richiesta RESTful GET al Server per disconnettere l'utente che ha richiesto l'operazione.
\end{description}

\paragraph{@ProfileDataService}
\begin{description}
 \item[Descrizione] \hfill \\
 Il servizio ritorna una \$resource legata ad un particolare profilo utente presente nel Server.
 \item[Utilizzo] \hfill \\
 La risorsa ritornata da questo modulo viene utilizzata dal ProfileCtrl per dialogare con le informazioni associate ad un singolo utente.
 Il metodo \textit{query} associato alla risorsa serve per ottenere i dati associati al profilo utente associato.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La funzione \textit{query} esegue una richiesta GET RESTful al server per ottenere le informazioni di un utente. Tali informazioni vengono 
 poi passate al ProfileController per essere fornite in visualizzazione al Client che le ha richieste.
\end{description}

\paragraph{@ProfileEditService}
\begin{description}
 \item[Descrizione] \hfill \\
 Il servizio ritorna una \$resource modificabile legata ad un particolare profilo utente presente nel Server.
 \item[Utilizzo] \hfill \\
 La risorsa ritornata da questo modulo viene utilizzata dal ProfileEditCtrl per dialogare con le informazioni associate ad un singolo utente.
 Alla risorsa ritornata vengono associati tre metodi: \textit{query}, \textit{update} e \textit{remove}.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La funzione \textit{query} esegue una richiesta GET RESTful al server per ottenere le informazioni di un utente. \textit{update} invia 
 nuove informazioni al Server che andranno a sovrascrivere quelle già presenti per aggiornarle. Il metodo \textit{remove} invece richiede al 
 Server di eseguire l'eliminazione di un dato profilo utente. Lato Server viene effettuato un controllo per verificare se l'utente che 
 ha richiesto l'eliminazione ha le credenziali per eliminare u utente. Nel caso in cui il controllo abbia esito positivo, il profilo
 viene eliminato dal Server.
\end{description}

\paragraph{@QueryService}
\begin{description}
 \item[Descrizione] \hfill \\
 Modulo che esporta una \$resource legata ad una query effettuabile sul database di analisi.
 \item[Utilizzo] \hfill \\
 La risorsa ritornata da questo servizio viene utilizzata nel QueryCtrl. Il suddetto controller utilizza la risorsa per richiedere l'esecuzione 
 di una query al Server inviando come argomenti i dati presenti nello \$scope in quel momento. \\
 Il modulo associa alla risorsa ritornata le funzioni \textit{query} e \textit{remove}.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La funzione \textit{query} esegue una richiesta GET REST al Server per richiedere l'esecuzione di una query sui dati del database di analisi. 
 I parametri su cui effettuare la query sono inviati dal Client sulla base delle condizioni immesse dall'utente e memorizzate nello \$scope.
 La funzione \textit{remove}, invece, richiede al Server l'eliminazione del Document individuato dall'indice \textit{index} presente nello \$scope. 
\end{description}

\paragraph{@RegisterService}
\begin{description}
 \item[Descrizione] \hfill \\
 Servizio che ritorna una \$resource legata ad un profilo utente intento ad effettuare la registrazione. 
 \item[Utilizzo] \hfill \\
 La risorsa ritornata da questo servizio viene utilizzata come tramite tra il Client e il Server per gestire la registrazione di un nuovo utente. 
 La risorsa viene utilizzata dal RegisterCtrl per richiedere la registrazione di un nuovo utente. Viene infatti esposto il metodo \textit{register} 
 che consente di inviare una richiesta di registrazione al Server con le credenziali inserite nell'apposito form del Client. 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La funzione \textit{register} esportata con la risorsa esegue una richiesta POST REST al Server inviando con essa le credenziali dell'utente 
 attualmente presenti nello \$scope.
\end{description}

\paragraph{@UserCollectionService}
\begin{description}
 \item[Descrizione] \hfill \\
 Servizio che fornisce una \$resource legata alla lista degli utenti ordinari non amministratori.  
 \item[Utilizzo] \hfill \\
 La risorsa messa a disposizione dallo UserCollectionService contiene la lista di tutti gli utenti 
 del sistema. Questa \$resource viene utilizzata dallo UsersCollectionController per visualizzare 
 correttamente tutti gli utenti del sistema ed organizzarli nell'apposita vista. Il modulo esporta 
 con la \$resource il metodo \textit{query}. 
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 La funzione \textit{query} effettua una richiesta REST GET al Server per ottenere la lista degli 
 utenti.
\end{description}

\paragraph{@UserDataService}
\begin{description}
 \item[Descrizione] \hfill \\
 Servizio che fornisce una \$resource legata ad un particolare utente non amministratore registrato al sistema.
 \item[Utilizzo] \hfill \\
 Questa risorsa viene utilizzata nello UserCtrl per richiedere al Server le informazioni associate ad un utente. Ogni utente è identificato dal proprio \textit{id} e questo campo viene passato dal Client per individuare un singolo utente, se presente, nel Server. La risorsa viene esportata 
con il metodo \textit{query}, per ottenere i dati voluti.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
 Il metodo \textit{query} esegue una richiesta GET REST al Server richiedendo le informazioni di un utente specifico, individuato da un identificativo univoco, inviato dal Client come argomento della richiesta.
\end{description}

\paragraph{@UserEditService}
\begin{description}
 \item[Descrizione] \hfill \\
 Servizio che fornisce una \$resource legata ad un particolare utente con campi modificabili registrato al sistema.
 \item[Utilizzo] \hfill \\
  Questa risorsa viene utilizzata nello UserEditCtrl per richiedere al Server le informazioni associate ad un utente. L'argomento della richiesta al 
  Server è l dell'utente. Le funzioni esportate con la \$resource sono: \textit{query}, \textit{update} e 
  \textit{remove}.
 \item[Funzionalità esportate] \hfill \\
 \emph{Dipendendenze iniettate:}
 \begin{itemize}
  \item \$resource.
 \end{itemize}
  L'oggetto ritornato da questo servizio lega la \$resource ritornata all'utente con il campo 
  \textit{id} uguale a quello utilizzato per la ricerca. Inoltre, oltre alla visualizzazione espressa tramite il metodo \textit{query} realizzato con una richiesta GET RESTful, descrive che le richieste di \emph{update} vengano effettuate
 con richieste di \emph{PUT}, mentre le richieste di \emph{remove} useranno il metodo http \emph{DELETE}.
\end{description}

\newpage
\section{Diagrammi di sequenza}


\appendix


%tracciamento in appendice? dont panic
\newpage


\section{Tracciamento}






%FINE DOCUMENTO NON CANCELLARE
\end{document}
